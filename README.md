# labtrade
A visual pythonic tool to support the development of strategies in quantitative finance. Labtrade proposes to be an auxiliary tool for scientific research in the quantitative environment, making it easy and fast to prototyping ideas that may or may not be profitable. Profitable strategies is something quite complex, due to the non-linear behavior of the price.

### Warning
This tool should be used for research purposes and for prototyping ideas, therefore not using it as a unique starting point for decision making in the real market. Unsuccessful operations can lead to incalculable financial losses.
## Features
- Support for develop strategies in Tecnhical analisys / Machine learning / Reinforcement learning
- Future / Spot markets strategies
- Strategy backtest
- Analyse of performance / risk (Equity-curve / Drawndowns / Sharpe-Ratio / Sortino / Calmar)
- Market emulation (stop-loss, stop-gain, maker-fee's)
- Analyse of continue rates in real data
- User-friendly visual for quantitative analysis

## Getting Started
### Requirements
```
PyQt5==5.15.6
PyQt5-sip==12.9.0
PyQt5-Qt5==5.15.2
pyqtgraph==0.11.0
pandas==1.1.5
numpy==1.19.5
sklearn==1.0.1
```
### Installation
```
pip install labtrade
```
## Usage
See the provided images for better understanding and run the suggested test files for clarity in usage.

### Data Preparation

Data input in labtrade has to be in dataframe format (pandas).
```python
# Data preparation for LabTrade
data = pd.DataFrame()
data['true'] = y_test
data['pred'] = y_pred
data['c'] = df.c.values  # price close (OHLC)
```
Labtrade provides an option to view features and other signals generated in the strategy.
```python
# Features visualization (optional)
data["SMA5_PLT2_BLUE"] = df.SMA5.values  # *_PLT(1,2 or 3)_BLUE/RED/YELLOW/GREEN/WHITE/MAGENTA/CYAN/ORANGE
data["SMA20_PLT2_RED"] = df.SMA20.values
data["SMA100_PLT2_YELLOW"] = df.SMA100.values
```

### Plot Function
Normal usage is illustrated below. The "Positions" in the market is generated by the strategy and must conform to the chosen logic. For a better understanding of the logics, pay attention to the test files test_AT.py and test_AT2.py.
```python
work = labtrade.labtrade()
work.plot(data,            # Dataframe 
          pos_true=y_test, # Positions generate by strategy
          pos_pred=y_pred, # Positions generate by strategy
          logic="long",    # Logics: long / short / long-short/ long-short-exit
          stop_rate=10,    # Stop loss above 10%
          gain_rate=None,  # Take profit (%) 
          amount=amount,   # Reference amount 
          maker_fee=None,  # Emulation of tax (%)
          risk_free=10,    # Sharpe-ratio / Sortino-ratio
          period=365)      # Sharpe-ratio / Sortino-ratio / Calmar
```
One way to evaluate regression strategies is to directly use a future percentage rate on the target. In this case, an activation threshold (pct_rate) must be configured. For more details see the test file test_RF.py.
```python
work = labtrade.labtrade()
work.plot(data,
          pct_rate=3,    # Percentage threshold rate "3%"
          logic="long-short", 
          stop_rate=None,
          gain_rate=None,
          amount=amount,
          maker_fee=None,
          risk_free=10,
          period=365)
```
### Chart Buttons
| Buttons |                      Function                       |
|:-------:|:---------------------------------------------------:|
|   ">"   |           Performance and metrics of risk           |
|   "A"   |                  Cumulative amount                  |
|   "X"   |            Features generate by strategy            |
|   "-"   | Positions / Signals / Signal-size / Percentage-rate |

### Chart Symbols
|            Symbol             |   Signal    |
|:-----------------------------:|:-----------:|
|    Green Triangle Painted     |    Long     |
| Red Triangle Inverted Painted |    Short    |
|        Green triangle         | Exit Short  |
|     Red Triangle Inverted     |  Exit Long  |
|          Magenta "x"          |  Stop loss  |
|          yellow "+"           | Take Profit |

## Contributing
Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

Please make sure to update tests as appropriate.

## License
[MIT](https://choosealicense.com/licenses/mit/)
